(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{307:function(t,a,e){"use strict";e.r(a);var s=e(28),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_3d模型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3d模型"}},[t._v("#")]),t._v(" 3D模型")]),t._v(" "),e("p",[t._v("A-Frame提供加载glTF和OBJ的组件。如果可能的话，我们建议使用glTF，因为glTF已被采纳为通过Web传输3D模型的标准。可以编写组件来处理任何文件格式，特别是具有3.js加载器的任何格式。我们还可以尝试在生态系统中找到已经编写用于处理其他格式（例如PLY、FBX、JSON、three.js）的组件。")]),t._v(" "),e("p",[t._v("模型采用纯文本文件格式，包含顶点、面、UV、纹理、材质和动画。它们还带有纹理图像，通常与模型文件一起提供。three.js加载程序解析这些文件，将它们作为网格在three.js场景中呈现。A-Frame模型组件包装这三个.js加载程序。")]),t._v(" "),e("h2",{attrs:{id:"设置模型动画"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置模型动画"}},[t._v("#")]),t._v(" 设置模型动画")]),t._v(" "),e("p",[t._v("我们可以使用Don McCurdy的动画混合器组件来播放模型的内置动画。动画通常是通过动画工具或程序生成的模型，而不是在A帧级别提供的。动画混合器组件将来可能会合并到A帧的核心中。")]),t._v(" "),e("p",[t._v("有关创建动画的起始材料，请参见：")]),t._v(" "),e("ul",[e("li",[t._v("Blender Tutorial - Creating and Editing Actions for Re-use in Animations and Games")]),t._v(" "),e("li",[t._v("Workflow: Animation from Blender to three.js by Arturo Paracuellos")])]),t._v(" "),e("h2",{attrs:{id:"_3d模型库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3d模型库"}},[t._v("#")]),t._v(" 3D模型库")]),t._v(" "),e("ul",[e("li",[t._v("Sketchfab")]),t._v(" "),e("li",[t._v("Clara.io")]),t._v(" "),e("li",[t._v("Archive3D")]),t._v(" "),e("li",[t._v("Sketchup’s 3D Warehouse")]),t._v(" "),e("li",[t._v("TurboSquid")])]),t._v(" "),e("h2",{attrs:{id:"如何创建模型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何创建模型"}},[t._v("#")]),t._v(" 如何创建模型")]),t._v(" "),e("p",[t._v("Supercraft - Built with A-Frame to model directly within VR with no modeling skill required and load with aframe-supercraft-loader.\nBlender\nMagicaVoxel\nAutodesk Maya or Maya LT\nMaxon Cinema4D")]),t._v(" "),e("h2",{attrs:{id:"托管模型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#托管模型"}},[t._v("#")]),t._v(" 托管模型")]),t._v(" "),e("p",[t._v("参考托管于发布模型章节")]),t._v(" "),e("h2",{attrs:{id:"修改质材"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改质材"}},[t._v("#")]),t._v(" 修改质材")]),t._v(" "),e("p",[t._v("要修改模型的材质，我们需要等待模型加载，然后修改从模型创建的three.js网格。发生的情况是A-Frame模型组件在网络上请求模型，解析模型，创建三个three.js网格或对象，并将它们加载到.getObject3D（'mesh'）下的"),e("A-entity",[t._v("下。我们可以进入这个网格并修改任何东西，在本例中是3.js材质。")])],1),t._v(" "),e("p",[t._v("请参见此修改加载模型的材质的实时示例。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("<script>\n  AFRAME.registerComponent('modify-materials', {\n    init: function () {\n      // Wait for model to load.\n      this.el.addEventListener('model-loaded', () => {\n        // Grab the mesh / scene.\n        const obj = this.el.getObject3D('mesh');\n        // Go over the submeshes and modify materials we want.\n        obj.traverse(node => {\n          if (node.name.indexOf('ship') !== -1) {\n            node.material.color.set('red');\n          }\n        });\n      });\n    }\n  });\n<\/script>\n\n<a-scene background=\"color: #ECECEC\">\n  <a-assets>\n    <a-asset-item id=\"cityModel\" src=\"https://cdn.aframe.io/test-models/models/glTF-2.0/virtualcity/VC.gltf\"></a-asset-item>\n  </a-assets>\n  <a-entity gltf-model=\"#cityModel\" modify-materials></a-entity>\n</a-scene>\n\n")])])]),e("h2",{attrs:{id:"故障排除"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#故障排除"}},[t._v("#")]),t._v(" 故障排除")]),t._v(" "),e("p",[t._v("在进行其他操作之前，请检查控制台是否有错误。与CORS相关的常见问题可以通过正确托管模型来解决，控制台还会告诉您模型是否需要丢失的其他文件。")]),t._v(" "),e("h3",{attrs:{id:"我看不到我的模型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#我看不到我的模型"}},[t._v("#")]),t._v(" 我看不到我的模型")]),t._v(" "),e("p",[t._v("如果控制台中没有错误，请尝试缩小模型。导出时经常会出现比例不匹配的情况，这将导致相机位于模型内，这意味着您将无法看到它。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('<a-entity gltf-model="#tree" scale="0.01 0.01 0.01"></a-entity>\n')])])]),e("p",[t._v("如果这不起作用，请按ctrl+alt+i打开检查器并缩小以验证模型是否实际存在。")]),t._v(" "),e("h3",{attrs:{id:"我看不到纹理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#我看不到纹理"}},[t._v("#")]),t._v(" 我看不到纹理")]),t._v(" "),e("p",[t._v("有时候纹理根本不起作用。这通常是因为导出器对纹理使用绝对路径，如C:\\ Path\\To\\Model\\texture.jpg或/Path/To/Model/texture.jpg，这在Web上不起作用。相反，使用与模型或.mtl文件相关的相对路径，如texture.jpg或images/texture.jpg。")]),t._v(" "),e("p",[t._v("在纯文本编辑器中打开模型（如果正在执行OBJ，则打开.mtl）")]),t._v(" "),e("p",[t._v("搜索纹理的名称（例如，texture.jpg）")]),t._v(" "),e("p",[t._v("通过使纹理的路径相对而不是绝对来修复该路径")]),t._v(" "),e("p",[t._v("如果这不起作用，你应该检查你的MTL文件，你可能会注意到它正在试图使用TGA或其他类型的纹理，不是普通的图像。在本例中，您需要包括另外三个.js加载程序。不过，尝试将所有tga转换为仅使用图像（如使用转换器的png）可能更容易，并将所有“tga”实例替换为“png”。")]),t._v(" "),e("h3",{attrs:{id:"我的模型没有动画"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#我的模型没有动画"}},[t._v("#")]),t._v(" 我的模型没有动画")]),t._v(" "),e("p",[t._v("动画混合器组件是Don McCurdy的aframe附加组件的一部分，它提供了在3.js（.json）和glTF（.glTF）模型中播放动画的控件。")]),t._v(" "),e("h3",{attrs:{id:"我的模型看起来扭曲了"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#我的模型看起来扭曲了"}},[t._v("#")]),t._v(" 我的模型看起来扭曲了")]),t._v(" "),e("p",[t._v("模型的一个常见问题是法线方向不正确。如果几何体上的某些面是透明的，或者网格中存在“洞”，则会知道法线有问题。")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("将模型导入Blender")])]),t._v(" "),e("li",[e("p",[t._v("在“属性”面板（n）的“着色”区域中启用“背面消隐”以更好地了解哪些面不正确。")])]),t._v(" "),e("li",[e("p",[t._v("选择对象")])]),t._v(" "),e("li",[e("p",[t._v("进入编辑模式（"),e("tab",[t._v("）")])],1)]),t._v(" "),e("li",[e("p",[t._v("按a键选择所有面")])]),t._v(" "),e("li",[e("p",[t._v("按"),e("ctrl",[t._v("+n使法线一致。如果它看起来与您想要的相反，请通过工具栏（t）翻转它们。")])],1)])]),t._v(" "),e("h2",{attrs:{id:"模型性能"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模型性能"}},[t._v("#")]),t._v(" 模型性能")]),t._v(" "),e("p",[t._v("我们可能会注意到，当我们导入一个大文件或复杂模型时，浏览器将缓慢停止甚至不加载。为高保真度渲染而设计的复杂模型并不适合实时应用。不过，我们可以做一些事情，让他们在保持外表的同时更有表现力。")]),t._v(" "),e("h3",{attrs:{id:"性能测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#性能测试"}},[t._v("#")]),t._v(" 性能测试")]),t._v(" "),e("p",[t._v("要了解场景的运行方式，请启用stats组件：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("<a-scene stats>\n\n")])])]),e("p",[t._v("在我们的场景周围移动，测试不同的场景，同时注意图形，确保在不同的硬件上测试。开发型个人电脑很可能比智能手机更容易处理场景。如果我们注意到没有达到每秒60帧，请尝试移除场景中的不同元素，直到找到罪犯。如果性能问题实体是三维模型，我们可以尝试对其进行优化。")]),t._v(" "),e("h3",{attrs:{id:"优化复杂模型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优化复杂模型"}},[t._v("#")]),t._v(" 优化复杂模型")]),t._v(" "),e("p",[t._v("场景优化的最大因素之一是模型复杂度和人脸数。几何学越少越好。")]),t._v(" "),e("p",[t._v("减少模型上面数的一个快速方法是在Blender中使用decimate修改器。“decimate”修改器减少了几何面的数量，同时保留了模型的UV坐标。没有什么比正确的建模技术更好的了，但是decimate修改器可能是使优化不好的文件运行更平滑的最后手段。修改器的设置将在很大程度上取决于模型和我们希望删除的详细程度。")]),t._v(" "),e("p",[t._v("调整比率（高亮显示）以减少面数。")]),t._v(" "),e("p",[t._v("在这个过程结束时，我们可能需要手动修复一些面。对结果满意后，保存一个副本，并导出到所需的文件类型。测试一下，根据需要调整一下。请注意，在修改器生效之前，我们可能必须先应用它。")])])}),[],!1,null,null,null);a.default=r.exports}}]);