(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{283:function(t,n,e){"use strict";e.r(n);var a=e(28),i=Object(a.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"游戏杆"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#游戏杆"}},[t._v("#")]),t._v(" 游戏杆")]),t._v(" "),e("p",[t._v("在本指南中，我们将学习如何使用一个名为nipple.js的外部库来添加用于移动平台的操纵杆控件。首先，我们需要从github下载乳头库并将其导入到项目中。该库位于https://yoannmoinet.github.io/nipplejs/。")]),t._v(" "),e("p",[t._v("要将javascript文件导入编辑器，请将其拖到资源浏览器中。该文件将显示为javascript资源，可以使用import（）方法将其导入脚本。")]),t._v(" "),e("p",[t._v("脚本对象可以从项目资源中导入（）文件，也可以从外部URL中获得透明度。根据配置的库模式（在脚本对象检查器面板上配置），可以在脚本的上下文中评估文件，可以在编译之前将文件附加到脚本代码中，也可以将其全局包含。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('include("nipplejs.min.js");\n\nvar cube, camera;\n\nvar manager;\nvar direction, pressed;\n\nfunction initialize()\n{\n\tcamera = scene.getObjectByName("camera");\n\tcube = scene.getObjectByName("cube");\n\t\n\tdirection = new Vector2(0, 0);\n\tpressed = false;\n\t\n\tmanager = nipplejs.create(\n\t{\n\t\tzone: program.division,\n\t\tmultitouch: false,\n\t\tmaxNumberOfNipples: 1,\n\t\tmode: "dynamic"\n\t});\n\t\n\tmanager.on("added", function(event, nipple)\n\t{\n\t\tnipple.on("move start end", function(event, data)\n\t\t{\n\t\t\tif(event.type === "move")\n\t\t\t{\n\t\t\t\tvar force = 0.08 * data.force;\n\t\t\t\t\n\t\t\t\tdirection.x = Math.cos(data.angle.radian) * force;\n\t\t\t\tdirection.y = Math.sin(data.angle.radian) * force;\n\t\t\t}\n\t\t\telse if(event.type === "start")\n\t\t\t{\n\t\t\t\tpressed = true;\n\t\t\t}\n\t\t\telse if(event.type === "end")\n\t\t\t{\n\t\t\t\tpressed = false;\n\t\t\t}\n\t\t});\n\t});\n\n\tmanager.on("removed", function(event, nipple)\n\t{\n\t\tnipple.off("move start end");\n\t});\n}\n\nfunction update()\n{\n\t//If the joystick is pressed update position\n\tif(pressed)\n\t{\n\t\tcube.position.x += direction.x;\n\t\tcube.position.y += direction.y;\t\t\n\t}\n\t\n\t//Limit the square movement\n\tif(cube.position.x > camera.right) cube.position.x = camera.right;\n\tif(cube.position.x < camera.left) cube.position.x = camera.left;\n\tif(cube.position.y > camera.top) cube.position.y = camera.top;\n\tif(cube.position.y < camera.bottom) cube.position.y = camera.bottom;\n}\n\nfunction dispose()\n{\n\tmanager.destroy();\n}\n')])])]),e("p",[t._v("要在编辑器中尝试此示例，可以下载项目文件或在Web编辑器上将其打开。使用触摸屏鼠标与白色块互动，并在场景中移动。您应该能够看到库提供的触摸输入。\n"),e("img",{attrs:{src:"/nunustudio/joystick/run.png",alt:"alt text"}})])])}),[],!1,null,null,null);n.default=i.exports}}]);